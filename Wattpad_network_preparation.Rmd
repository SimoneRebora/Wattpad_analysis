---
title: "Wattpad Network Preparation"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

This is the R Markdown document that prepares the Wattpad dataset for network analysis<br/>
First, let's upload the corpus.

## Upload dataset

Each entry in the corpus is composed by 10 parts:<br/>
- unique identifier for book, chapter, and paragraph<br/>
- title of book, chapter, and paragraph<br/>
- name of the user and date of his/her comment<br/>
- the comment<br/>
- a logical TRUE/FALSE, that indicates if the comment is a reply to a previuos comment<br/>
<br/>
Note that the corpus is a "sample" generated on the basis of the "Pride and Prejudice" dataset.<br/>
The text is the same as it appears in Wattpad and Project Gutenberg; usernames have been anonymized; dates and replies indicators have been scrambled; comments have been generated artifically by re-mixing the words of the actual comments. 

```{r corpus}
wattpad_df <- read.csv("Sample_wattpad_corpus.csv", stringsAsFactors = F)
summary(wattpad_df)
```

## Corpus pre-processing
### Step 1

Exclude not commented paragraphs (as a convention, hey are identified by the "NO_COMMENTS" string in the "username" position)

```{r}
exclude <- which(wattpad_df$username=="NO_COMMENTS")
wattpad_df <- wattpad_df[-exclude,]
```

### Step 2

General statistics on comments/replies

```{r}
# percentage of replies
percentage_replies <- length(which(wattpad_df$reply == T))/length(wattpad_df$reply)*100
# percentage of comments
percentage_comments <- length(which(wattpad_df$reply == F))/length(wattpad_df$reply)*100
cat("Percentage of comments:",
    percentage_comments,
    "Percentage of replies:",
    percentage_replies,
    sep = "\n")
```

### Step 3

Exclude comments with no user (probably deleted from Wattpad). If kept, they will be confused with each other

```{r}
exclude <- which(wattpad_df$username=="-")
wattpad_df <- wattpad_df[-exclude,]
```

